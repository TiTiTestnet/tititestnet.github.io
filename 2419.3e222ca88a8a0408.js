"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[2419],{82419:(ut,v,a)=>{a.r(v),a.d(v,{SwapModule:()=>et});var l=a(69808),y=a(93075),d=a(71787),U=a(11730),x=a(98538),u=a.n(x),D=a(28321),C=a(17489),m=a(48634),t=a(5e3),M=a(65707),b=a(94602),P=a(32681),T=a(63874),F=a(22313),B=a(48966),V=a(53405),_=a(74696),q=a(31657),k=a(92134),f=a(67322),Z=a(77531),w=a(47423),c=a(81125),A=a(4834),S=a(26688),I=a(87238),O=a(11523),L=a(75303);function j(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){return t.CHM(n),t.oxw().onSwap()}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("disabled",!n.outputValue||0>=n.outputValue||n.inputValue>(n.isBuyingTiUSD?n.token1Balance:n.token0Balance)||n.isLoading),t.xp6(1),t.Oqu(n.isLoading?"waiting...":"Swap")}}function J(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){return t.CHM(n),t.oxw().onApprove()}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("disabled",n.isLoading),t.xp6(1),t.Oqu(n.isLoading?"waiting...":"Approve")}}function R(e,s){if(1&e&&(t.TgZ(0,"span",43),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" + ",n.outputValue," TiUSD")}}function Q(e,s){if(1&e&&(t.TgZ(0,"span",43),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" + ",n.outputValue," TiUSD")}}function Y(e,s){if(1&e&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" \u2192 ",t.xi3(2,1,n.use2earnService.getNewBuyTiUSDPersonalProportion(n.outputValue),"1.2-2"),"%")}}function N(e,s){if(1&e&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" \u2192 ",t.xi3(2,1,n.use2earnService.getNewbuyTiUSDPersonalRewardRate(n.outputValue),"1.4-4")," TiTi")}}function z(e,s){1&e&&(t.TgZ(0,"span",43),t._uU(1,"Buy TiUSD (Rewarded)"),t.qZA())}function H(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1,"Sell TiUSD"),t.qZA())}function E(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"a",44),t.TgZ(2,"span",45),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",46),t._uU(5,"open_in_new"),t.qZA(),t.qZA(),t.ynx(6,47),t.YNc(7,z,2,0,"span",48),t.YNc(8,H,2,0,"span",49),t.BQk(),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.BQk()),2&e){const n=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("href",i.chainInfoService.getChainConfig().blockExplorerUrls[0]+"/tx/"+n.txHash,t.LSH),t.xp6(2),t.Oqu(n.txHash),t.xp6(3),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","0"),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(2),t.hij("",t.xi3(11,7,i.formatTokenValue(n.amount,"18"),"1.2-4")," TiUSD"),t.xp6(3),t.Oqu(t.xi3(14,10,1e3*n.timestamp,"dd/M/y HH:mm:ss"))}}function W(e,s){1&e&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2,"No data."),t.qZA(),t.BQk())}const $=[{token0:"TiUSD",token1:"USDC"}];let X=(()=>{class e{constructor(n,i,o,r,h,p,g,at,ot,st,rt){this.chainInfoService=n,this.accountService=i,this.router=o,this.use2earnService=r,this.web3Service=g,this.dialog=at,this.graphService=ot,this.echartService=st,this.refreshService=rt,this.isBuyingTiUSD=!0,this.isLoading=!0,this.isApproved=!1,this.token0Balance=0,this.token1Balance=0,this.currentSwapPair=$[0],this.inputValue=0,this.outputValue=0,this.fund0=0,this.fund1=0,this.decimal0=18,this.decimal1=6,this.priceImpact="0.00%",this.MMFfund=0,this.lastFund0=0,this.lastFund1=0,this.chartData=[],this.option={},this.buyTiUSDRecords=[],h.addSvgIconLiteral("USDC",p.bypassSecurityTrustHtml(K)),h.addSvgIconLiteral("TiUSD",p.bypassSecurityTrustHtml(this.chainInfoService.getChainConfig().tiusd.icon))}get prv(){const n=Math.abs(this.lastFund1-this.MMFfund)+(this.lastFund0-this.fund0);return n>0?n:0}ngOnInit(){this.fetchApproveInfo(),this.initData();const n=this.refreshService.registerFunction(()=>this.initData()),i=this.refreshService.registerFunctionWithoutInterval(()=>this.fetchApproveInfo());this.unregister=()=>{n(),i()}}ngOnDestroy(){var n;null===(n=this.unregister)||void 0===n||n.call(this)}initData(){this.fetchBalanceOfToken0(),this.fetchBalanceOfToken1(),this.fetchPoolInfo(),this.fetchMMFFund(),this.fetchLastfund0(),this.fetchLastfund1(),this.fetchOption().then(()=>this.fetchTiUSDChartData()),this.fetchBuyTiUSDRecords()}buildOption(){this.option.series[0].data=this.chartData,this.option=(0,C.cloneDeep)(this.option)}calcPriceImpact(n,i){if(n>0&&i>0){const o=this.fund1/this.fund0;this.priceImpact=(100*Math.abs(o-n/i)/o).toFixed(2)+"%"}}onInputValueChange(n){try{this.inputValue=parseFloat(n.target.value)}catch(h){this.inputValue=0}const i=997*this.inputValue;this.outputValue=parseFloat((i*(this.isBuyingTiUSD?this.fund0:this.fund1)/(1e3*(this.isBuyingTiUSD?this.fund1:this.fund0)+i)).toFixed(4)),this.isBuyingTiUSD?this.calcPriceImpact(this.inputValue,this.outputValue):this.calcPriceImpact(this.outputValue,this.inputValue)}onOutputValueChange(n){try{this.outputValue=parseFloat(n.target.value)}catch(i){this.outputValue=0}this.inputValue=parseFloat((((this.isBuyingTiUSD?this.fund0:this.fund1)*(this.isBuyingTiUSD?this.fund1:this.fund0)*1e3/((this.isBuyingTiUSD?this.fund0:this.fund1)-this.outputValue)-1e3*(this.isBuyingTiUSD?this.fund1:this.fund0))/997).toFixed(4)),this.isBuyingTiUSD?this.calcPriceImpact(this.inputValue,this.outputValue):this.calcPriceImpact(this.outputValue,this.inputValue)}onChangeSwapType(){this.isBuyingTiUSD=!this.isBuyingTiUSD,this.inputValue=this.outputValue;const n=997*this.inputValue;this.outputValue=parseFloat((n*(this.isBuyingTiUSD?this.fund0:this.fund1)/(1e3*(this.isBuyingTiUSD?this.fund1:this.fund0)+n)).toFixed(4)),this.isBuyingTiUSD?this.calcPriceImpact(this.inputValue,this.outputValue):this.calcPriceImpact(this.outputValue,this.inputValue),this.fetchApproveInfo()}fetchBuyTiUSDRecords(){return this.graphService.fetchBuyTiUSDRecords().then(({data:n})=>{this.buyTiUSDRecords=n.mammrecords.map(i=>({txHash:i.id,type:i.type,amount:i.amount,timestamp:i.timestamp}))})}fetchApproveInfo(){return this.isLoading=!0,this.accountService.getCurrentAccountAsyn().then(n=>Promise.all([this.web3Service.invokeContract(this.isBuyingTiUSD?"USDC":"TiUSD","allowance",[n,this.chainInfoService.getChainConfig().contractAddressMap.MAMMSwapPair]),this.web3Service.invokeContract(this.isBuyingTiUSD?"USDC":"TiUSD","balanceOf",[n])]).then(([i,o])=>{"0"!==i[0]&&new(u())(i[0]).gte(new(u())(o[0]))?(this.isApproved=!0,this.isLoading=!1):(this.isApproved=!1,this.isLoading=!1)}))}onApprove(){return this.isLoading=!0,this.web3Service.invokeContract(this.isBuyingTiUSD?"USDC":"TiUSD","approve",[this.chainInfoService.getChainConfig().contractAddressMap.MAMMSwapPair,U.fV]).then(n=>{n.status?(this.isApproved=!0,this.isLoading=!1):(this.isApproved=!1,this.isLoading=!1)},n=>{this.isApproved=!1,this.isLoading=!1})}fetchOption(){return this.echartService.fetchOption("TiUSDPrice").then(n=>this.option=n)}fetchBalanceOfToken0(){return this.accountService.getCurrentAccountAsyn().then(n=>this.web3Service.invokeContract(this.currentSwapPair.token0,"balanceOf",[n]).then(i=>{this.token0Balance=parseFloat(new(u())(i[0]).div(new(u())("10").pow(new(u())(this.decimal0-4))).toString())/1e4}))}fetchBalanceOfToken1(){return this.accountService.getCurrentAccountAsyn().then(n=>this.web3Service.invokeContract(this.currentSwapPair.token1,"balanceOf",[n]).then(i=>{this.token1Balance=parseFloat(new(u())(i[0]).div(new(u())("10").pow(new(u())(this.decimal1-4))).toString())/1e4}))}fetchPoolInfo(){return this.web3Service.invokeContract("MAMMSwapPair","getDepth",[]).then(n=>{this.fund0=n[0]/10**this.decimal0,this.fund1=n[1]/10**this.decimal1})}fetchMMFFund(){return this.web3Service.invokeContract("MAMMSwapPair","getMMFFunds",[]).then(n=>{this.MMFfund=n[1]/10**this.decimal1})}fetchLastfund0(){return this.web3Service.invokeContract("ReOrdersController","lastFund0",[]).then(n=>{this.lastFund0=n[0]/10**this.decimal0})}fetchLastfund1(){return this.web3Service.invokeContract("ReOrdersController","lastFund1",[]).then(n=>{this.lastFund1=n[0]/10**this.decimal1})}fetchTiUSDChartData(){return this.graphService.fetchMMFSwapPairHourData(this.chainInfoService.getChainConfig().contractAddressMap.MAMMSwapPair).then(({data:n})=>{var i,o;this.chartData=Array(720).fill(null);const r=(0,D.jn)().reverse();null===(o=null===(i=n.pair)||void 0===i?void 0:i.pairHourData)||void 0===o||o.forEach(p=>{const g=r.indexOf(1e3*p.hourStartTimestamp);-1!==g&&(this.chartData[g]=parseFloat(p.token0Price).toFixed(4))});let h=1;this.chartData.forEach((p,g)=>{null==p?this.chartData[g]=h:h=p}),this.buildOption()})}onSwap(){if(this.isLoading=!0,0!==this.outputValue)if(this.isBuyingTiUSD){const n=(0,m.parseUnits)(this.inputValue+"",this.decimal1);this.web3Service.invokeContract("MAMMSwapPair","mint",[n.toString()]).then(i=>{this.isLoading=!1},i=>{this.isLoading=!1})}else{const n=(0,m.parseUnits)(this.inputValue+"",this.decimal0);this.web3Service.invokeContract("MAMMSwapPair","redeem",[n.toString()]).then(i=>{this.isLoading=!1},i=>{this.isLoading=!1})}}goToUser2EarnPage(){this.router.navigateByUrl("/use2earn")}maxSwapInputValue(){const n=Math.pow(10,4);this.inputValue=parseFloat((Math.floor((this.isBuyingTiUSD?this.token1Balance:this.token0Balance)*n)/n).toFixed(4));const i=997*this.inputValue;this.outputValue=parseFloat((i*(this.isBuyingTiUSD?this.fund0:this.fund1)/(1e3*(this.isBuyingTiUSD?this.fund1:this.fund0)+i)).toFixed(4)),this.isBuyingTiUSD?this.calcPriceImpact(this.inputValue,this.outputValue):this.calcPriceImpact(this.outputValue,this.inputValue)}formatTokenValue(n,i){return(0,m.formatUnits)(n,i)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M.Z),t.Y36(b.B),t.Y36(d.F0),t.Y36(P.Q),t.Y36(T.jv),t.Y36(F.H7),t.Y36(U.Uc),t.Y36(B.uw),t.Y36(V.h),t.Y36(_.p),t.Y36(q.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-swap"]],decls:155,vars:67,consts:[[1,"swap-wrapper"],[1,"page-title",2,"grid-column-start","span 2"],["text","Swap TiUSD with USDC."],["href","https://docs.titi.finance/overview/what-is-tiusd-token/how-tiusd-is-minted-and-redeemed","target","_blank"],[1,"swap-card","mat-elevation-z4"],[2,"grid-column-start","span 3","justify-self","center"],["appearance","outline",1,"swap-input"],["type","text","matInput","","type","number",2,"height","24px","font-size","24px",3,"value","change"],["matPrefix","",2,"padding-right","12px",3,"svgIcon"],["matSuffix",""],["mat-flat-button","",2,"margin-bottom","12px","background-color","transparent","color","#2DD6B5","font-size","18px",3,"click"],[2,"color","rgba(185, 185, 185, 0.9)","font-size","18px","font-weight","bold"],["mat-icon-button","","color","primary",1,"swap-type-btn",2,"justify-self","center",3,"click"],[2,"width","40px","height","40px","font-size","40px","line-height","40px"],["appearance","outline",1,"swap-input",2,"min-height","91px"],[2,"justify-self","start"],["text","Current price will go back to $1 soon once the core pegging mechanism, Reorders,  is triggered."],[2,"justify-self","end"],["text","Slippage against Transaction Volume."],["mat-raised-button","","class","swap-btn","color","primary",3,"disabled","click",4,"ngIf"],[2,"grid-column-start","span 3","width","100%"],["expanded","",2,"background","rgba(255, 255, 255, 0.1)"],[1,"golden-highlight",2,"font-weight","bolder"],[2,"display","grid","grid-template-columns","1fr 1fr","align-items","center","padding","12px 0","row-gap","1rem"],["class","golden-highlight",4,"ngIf"],["routerLink","/use2earn/buyTiUSD",1,"golden-highlight-a",2,"grid-column-start","span 2","justify-self","center"],[1,"pool-info-card","mat-elevation-z4"],[1,"pool-info-title"],[2,"justify-self","center"],["matTooltip","Total TiUSD and USDC amount in TiTi-AMM swap pool.","matTooltipPosition","above","matTooltipHideDelay","200",3,"matTooltipClass"],[2,"justify-self","end","grid-column-start","2","grid-column-end","4"],["matTooltip","The USDC liquidity in this pool are provided partly by PRV, and partly by MMF.","matTooltipPosition","above","matTooltipHideDelay","200",3,"matTooltipClass"],["text","Protocol Reserve Value, referring to the aggregated value of the Reserve Assets backing circulating TiUSDs."],["text","The USDC liquidity provided by LPs through Market Maker Fund."],[1,"pool-chart",2,"width","100%","height","100%"],[2,"width","100%","height","100%",3,"option"],[1,"mat-elevation-z4",2,"display","grid","grid-template-columns","1fr 1fr 1fr 1fr","row-gap","1rem"],[2,"grid-column-start","span 4","justify-self","center"],[1,"divider",2,"grid-column-start","span 4","justify-self","center"],[2,"grid-column-start","span 4","display","grid","grid-template-columns","1fr 1fr 1fr 1fr","row-gap","0.5rem","column-gap","8px","font-size","max(0.8rem,12px)","max-height","20vh","overflow-y","scroll"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","color","primary",1,"swap-btn",3,"disabled","click"],[1,"golden-highlight"],["target","_blank",2,"width","100%","display","flex","flex-direction","row","text-decoration","none",3,"href"],[2,"display","block","overflow","hidden","text-overflow","ellipsis","max-width","8vw"],[2,"width","12px","height","12px","font-size","12px","line-height","12px"],[3,"ngSwitch"],["class","golden-highlight",4,"ngSwitchCase"],[4,"ngSwitchCase"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h1"),t._uU(3,"TiTi-AMMs"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"TiUSD Primary Markets"),t._UZ(6,"titi-tooltip",2),t._uU(7,". "),t.TgZ(8,"a",3),t._uU(9,"Click to Learn More"),t.qZA(),t._uU(10,"."),t.qZA(),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"h2",5),t._uU(13),t.qZA(),t.TgZ(14,"mat-form-field",6),t.TgZ(15,"mat-label"),t._uU(16),t.ALo(17,"numberFormat"),t.qZA(),t.TgZ(18,"input",7),t.NdJ("change",function(r){return i.onInputValueChange(r)}),t.qZA(),t._UZ(19,"mat-icon",8),t.TgZ(20,"div",9),t.TgZ(21,"button",10),t.NdJ("click",function(){return i.maxSwapInputValue()}),t._uU(22,"MAX"),t.qZA(),t.TgZ(23,"span",11),t._uU(24),t.qZA(),t.qZA(),t.qZA(),t._UZ(25,"div"),t.TgZ(26,"button",12),t.NdJ("click",function(){return i.onChangeSwapType()}),t.TgZ(27,"mat-icon",13),t._uU(28,"arrow_circle_down"),t.qZA(),t.qZA(),t._UZ(29,"div"),t.TgZ(30,"mat-form-field",14),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"numberFormat"),t.qZA(),t.TgZ(34,"input",7),t.NdJ("change",function(r){return i.onOutputValueChange(r)}),t.qZA(),t._UZ(35,"mat-icon",8),t.TgZ(36,"div",9),t.TgZ(37,"span",11),t._uU(38),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"span",15),t._uU(40,"Price"),t._UZ(41,"titi-tooltip",16),t._uU(42,":"),t.qZA(),t._UZ(43,"div"),t.TgZ(44,"span",17),t._uU(45),t.ALo(46,"number"),t.qZA(),t.TgZ(47,"span",15),t._uU(48,"Price Impact"),t._UZ(49,"titi-tooltip",18),t._uU(50,":"),t.qZA(),t._UZ(51,"div"),t.TgZ(52,"span",17),t._uU(53),t.qZA(),t.YNc(54,j,2,2,"button",19),t.YNc(55,J,2,2,"button",19),t.TgZ(56,"div",20),t.TgZ(57,"mat-accordion"),t.TgZ(58,"mat-expansion-panel",21),t.TgZ(59,"mat-expansion-panel-header"),t.TgZ(60,"mat-panel-title"),t.TgZ(61,"span",22),t._uU(62,"Use-To-Earn: Buy-TiUSD can earn you extra $TiTi Rewards"),t.qZA(),t.qZA(),t._UZ(63,"mat-panel-description"),t.qZA(),t.TgZ(64,"div",23),t.TgZ(65,"span",15),t._uU(66,"Your Distributed Buy-TiUSD Rewards:"),t.qZA(),t.TgZ(67,"span",17),t._uU(68),t.ALo(69,"number"),t.qZA(),t.TgZ(70,"span",15),t._uU(71,"Your Buy-TiUSD Amount today:"),t.qZA(),t.TgZ(72,"div",17),t._uU(73),t.ALo(74,"number"),t.YNc(75,R,2,1,"span",24),t.qZA(),t.TgZ(76,"span",15),t._uU(77,"All users' Buy-TiUSD Amount today:"),t.qZA(),t.TgZ(78,"div",17),t._uU(79),t.ALo(80,"number"),t.YNc(81,Q,2,1,"span",24),t.qZA(),t.TgZ(82,"span",15),t._uU(83,"Your Proportion:"),t.qZA(),t.TgZ(84,"div",17),t._uU(85),t.ALo(86,"number"),t.YNc(87,Y,3,4,"span",24),t.qZA(),t.TgZ(88,"span",15),t._uU(89,"Your pending rewards today:"),t.qZA(),t.TgZ(90,"div",17),t._uU(91),t.ALo(92,"number"),t.YNc(93,N,3,4,"span",24),t.qZA(),t.TgZ(94,"a",25),t._uU(95," Click to learn more about Use-To-Earn."),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"div",26),t.TgZ(97,"h2",27),t._uU(98,"Pool Info"),t.qZA(),t._UZ(99,"mat-divider"),t.TgZ(100,"mat-chip-list",28),t.TgZ(101,"mat-chip",29),t._uU(102,"Liquidity "),t.qZA(),t.qZA(),t._UZ(103,"mat-divider"),t.TgZ(104,"span",15),t._uU(105,"TiUSD:"),t.qZA(),t.TgZ(106,"span",30),t._uU(107),t.ALo(108,"numberFormat"),t.qZA(),t.TgZ(109,"span",15),t._uU(110,"USDC:"),t.qZA(),t.TgZ(111,"span",30),t._uU(112),t.ALo(113,"numberFormat"),t.qZA(),t._UZ(114,"mat-divider"),t.TgZ(115,"mat-chip-list",28),t.TgZ(116,"mat-chip",31),t._uU(117,"Composition "),t.qZA(),t.qZA(),t._UZ(118,"mat-divider"),t.TgZ(119,"span",15),t._uU(120,"Protocol Reserve Value (PRV)"),t._UZ(121,"titi-tooltip",32),t._uU(122,":"),t.qZA(),t.TgZ(123,"span",30),t._uU(124),t.ALo(125,"numberFormat"),t.qZA(),t.TgZ(126,"span",15),t._uU(127,"Market Maker Fund (MMF)"),t._UZ(128,"titi-tooltip",33),t._uU(129,":"),t.qZA(),t.TgZ(130,"span",30),t._uU(131),t.ALo(132,"numberFormat"),t.qZA(),t._UZ(133,"mat-divider"),t.TgZ(134,"mat-chip-list",28),t.TgZ(135,"mat-chip"),t._uU(136,"TiUSD Price"),t.qZA(),t.qZA(),t._UZ(137,"mat-divider"),t.TgZ(138,"div",34),t._UZ(139,"titi-chart-wrapper",35),t.qZA(),t.qZA(),t.TgZ(140,"div",36),t.TgZ(141,"h2",37),t._uU(142,"User Action Records"),t.qZA(),t.TgZ(143,"span"),t._uU(144,"Tx Hash"),t.qZA(),t.TgZ(145,"span"),t._uU(146,"Act."),t.qZA(),t.TgZ(147,"span"),t._uU(148,"Amount"),t.qZA(),t.TgZ(149,"span"),t._uU(150,"Time"),t.qZA(),t._UZ(151,"div",38),t.TgZ(152,"div",39),t.YNc(153,E,15,13,"ng-container",40),t.YNc(154,W,3,0,"ng-container",41),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(13),t.hij(" ",i.isBuyingTiUSD?i.currentSwapPair.token1+" \u2192 "+i.currentSwapPair.token0:i.currentSwapPair.token0+" \u2192"+i.currentSwapPair.token1," "),t.xp6(3),t.hij("Balance:",t.xi3(17,31,i.isBuyingTiUSD?i.token1Balance:i.token0Balance,4),""),t.xp6(2),t.Q6J("value",i.inputValue),t.xp6(1),t.Q6J("svgIcon",i.isBuyingTiUSD?i.currentSwapPair.token1:i.currentSwapPair.token0),t.xp6(5),t.Oqu(i.isBuyingTiUSD?i.currentSwapPair.token1:i.currentSwapPair.token0),t.xp6(8),t.hij("Balance:",t.xi3(33,34,i.isBuyingTiUSD?i.token0Balance:i.token1Balance,4),""),t.xp6(2),t.Q6J("value",i.outputValue),t.xp6(1),t.Q6J("svgIcon",i.isBuyingTiUSD?i.currentSwapPair.token0:i.currentSwapPair.token1),t.xp6(3),t.Oqu(i.isBuyingTiUSD?i.currentSwapPair.token0:i.currentSwapPair.token1),t.xp6(7),t.hij("$",t.xi3(46,37,i.fund1/i.fund0||0,"1.4-4"),""),t.xp6(8),t.Oqu(i.priceImpact),t.xp6(1),t.Q6J("ngIf",i.isApproved),t.xp6(1),t.Q6J("ngIf",!i.isApproved),t.xp6(13),t.hij("",t.xi3(69,40,i.use2earnService.buyTiUSDPersonalReward-i.use2earnService.buyTiUSDPersonalRewardRate,"1.4-4")," TiTi"),t.xp6(5),t.hij(" ",t.xi3(74,43,i.formatTokenValue(i.use2earnService.buyTiUSDPersonalAmount+"","18"),"1.4-4")," TiUSD"),t.xp6(2),t.Q6J("ngIf",i.isBuyingTiUSD&&i.outputValue>0),t.xp6(4),t.hij("",t.xi3(80,46,i.formatTokenValue(i.use2earnService.buyTiUSDTotalAmount+"","18"),"1.4-4")," TiUSD"),t.xp6(2),t.Q6J("ngIf",i.isBuyingTiUSD&&i.outputValue>0),t.xp6(4),t.hij("",t.xi3(86,49,i.use2earnService.buyTiUSDPersonalProportion,"1.2-2"),"%"),t.xp6(2),t.Q6J("ngIf",i.isBuyingTiUSD&&i.outputValue>0),t.xp6(4),t.hij("",t.xi3(92,52,i.use2earnService.buyTiUSDPersonalRewardRate,"1.4-4")," TiTi"),t.xp6(2),t.Q6J("ngIf",i.isBuyingTiUSD&&i.outputValue>0),t.xp6(8),t.Q6J("matTooltipClass","titi-tooltip-text"),t.xp6(6),t.Oqu(t.xi3(108,55,i.fund0,4)),t.xp6(5),t.Oqu(t.xi3(113,58,i.fund1,4)),t.xp6(4),t.Q6J("matTooltipClass","titi-tooltip-text"),t.xp6(8),t.hij("",t.xi3(125,61,i.prv,4)," USDC"),t.xp6(7),t.hij("",t.xi3(132,64,i.MMFfund,4)," USDC"),t.xp6(8),t.Q6J("option",i.option),t.xp6(14),t.Q6J("ngForOf",i.buyTiUSDRecords),t.xp6(1),t.Q6J("ngIf",0==i.buyTiUSDRecords.length))},directives:[k.Q,f.KE,f.hX,Z.Nt,T.Hw,f.qo,f.R9,w.lW,l.O5,c.pp,c.ib,c.yz,c.yK,c.u4,d.yS,A.d,S.qn,S.HS,I.gM,O.o,l.sg,l.RF,l.n9],pipes:[L.p,l.JJ,l.uU],styles:[".swap-wrapper[_ngcontent-%COMP%]{padding:12px 24px;display:grid;grid-template-columns:14fr 10fr;grid-column-gap:2vw;column-gap:2vw;grid-row-gap:2vw;row-gap:2vw}.swap-card[_ngcontent-%COMP%]{align-self:start;justify-self:start;width:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-row-gap:1vw;row-gap:1vw;align-items:center}.swap-input[_ngcontent-%COMP%], .swap-btn[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4}.titi-dark-theme[_nghost-%COMP%]   .swap-type-btn[_ngcontent-%COMP%], .titi-dark-theme   [_nghost-%COMP%]   .swap-type-btn[_ngcontent-%COMP%]{color:#cfff9f}.pool-info-card[_ngcontent-%COMP%]{align-self:start;justify-self:start;width:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-row-gap:1vw;row-gap:1vw;align-items:center}.pool-info-title[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;justify-self:center}.pool-chart[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;justify-self:center;width:100%;height:100%}  .mat-form-field-flex{min-height:68px}@media screen and (max-width: 1024px){.swap-wrapper[_ngcontent-%COMP%]{width:100%;padding:12px;margin:0;display:grid;grid-template-columns:1fr;grid-row-gap:1rem;row-gap:1rem}.swap-card[_ngcontent-%COMP%]{width:100%}}"]}),e})();const K='<svg t="1640244631175" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2048" width="24" height="24"><path d="M513.896296 986.074074c263.888593 0 477.866667-213.978074 477.866667-477.866667s-213.978074-477.866667-477.866667-477.866666-477.866667 213.978074-477.866666 477.866666 213.978074 477.866667 477.866666 477.866667z" fill="#1296db" p-id="2049"></path><path d="M644.892444 584.210963c0-69.783704-42.477037-93.297778-124.54874-104.523852-60.529778-8.798815-72.286815-22.983111-72.286815-51.275852 0-26.851556 20.48-45.89037 60.074667-45.89037 35.802074 0 56.357926 12.515556 64.853333 41.263407 1.896296 6.447407 7.661037 10.998519 14.336 10.998519h31.402667c8.722963 0 15.54963-8.040296 13.729185-16.611556-9.936593-45.511111-40.580741-72.817778-88.670815-81.389037v-47.559111c0-8.267852-6.674963-14.942815-14.942815-14.942815h-29.88563c-8.267852 0-14.942815 6.674963-14.942814 14.942815v46.26963c-59.240296 8.419556-97.46963 47.786667-97.46963 98.379852 0 65.460148 39.518815 90.794667 123.031704 102.02074 56.661333 9.253926 72.741926 21.466074 72.741926 53.703111s-27.382519 53.703111-65.91526 53.703112c-52.110222 0-69.328593-22.831407-75.624296-52.337778-1.517037-6.97837-7.509333-12.136296-14.639407-12.136297h-34.057482c-8.571259 0-15.322074 7.736889-13.805037 16.156445 8.647111 49.682963 40.580741 86.167704 105.737482 95.04237v47.179852c0 8.267852 6.674963 14.942815 14.942814 14.942815h29.88563c8.267852 0 14.942815-6.674963 14.942815-14.942815v-47.179852c61.667556-9.784889 101.110519-52.717037 101.110518-105.813333z" fill="#FFFFFF" p-id="2050"></path><path d="M411.496296 793.713778c-114.384593-41.870222-196.228741-151.855407-196.22874-280.576 0-128.720593 81.844148-238.629926 196.22874-280.576 7.130074-2.578963 12.818963-11.226074 12.818963-18.811259v-27.83763c0-11.301926-8.798815-17.673481-19.569778-14.260148C260.171852 217.92237 155.496296 353.317926 155.496296 513.21363c0 159.895704 104.675556 295.291259 249.249185 341.485037 10.770963 3.413333 19.569778-2.958222 19.569778-14.260148v-27.83763c0-7.661037-5.688889-16.232296-12.818963-18.887111zM623.122963 171.728593c-10.770963-3.413333-19.569778 2.958222-19.569778 14.260148v27.837629c0 7.585185 5.688889 16.232296 12.818963 18.81126 114.384593 41.870222 196.228741 151.855407 196.228741 280.576 0 128.720593-81.844148 238.629926-196.228741 280.576-7.812741 2.88237-12.818963 10.543407-12.818963 18.811259v27.83763c0 11.301926 8.798815 17.673481 19.569778 14.260148 144.57363-46.193778 249.249185-181.589333 249.249185-341.485037S767.620741 217.92237 623.122963 171.728593z" fill="#FFFFFF" p-id="2051"></path></svg>',G=[{path:"",component:X}];let tt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(G)],d.Bz]}),e})();var it=a(45922),nt=a(87841);let et=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,y.u5,tt,Z.c,w.ot,T.Ps,A.t,S.Hi,it.F,c.To,nt.m]]}),e})()}}]);