"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[1700],{31700:(cn,x,r)=>{r.r(x),r.d(x,{LpminingPoolsModule:()=>B});var l=r(69808),h=r(71787),C=r(32076),n=r(5e3),D=r(65707),M=r(11730),S=r(53405),V=r(92134),A=r(63874);function k(o,e){1&o&&(n.ynx(0),n._uU(1," \u{1f525}"),n.BQk())}const a=function(o){return{"golden-highlight":o}};function b(o,e){if(1&o&&(n.ynx(0),n.TgZ(1,"span",11),n._uU(2),n.ALo(3,"number"),n.qZA(),n.TgZ(4,"div",14),n.TgZ(5,"span",11),n._uU(6,"Trading Fee vAPY:"),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.ALo(9,"number"),n.ALo(10,"number"),n.qZA(),n.TgZ(11,"span",11),n._uU(12,"TiTi Rewards tAPY:"),n.qZA(),n.TgZ(13,"span",11),n._uU(14),n.ALo(15,"number"),n.qZA(),n.qZA(),n.BQk()),2&o){const i=e.ngIf,t=n.oxw().index;n.xp6(1),n.Q6J("ngClass",n.VKq(21,a,0==t)),n.xp6(1),n.hij("$ ",n.xi3(3,9,i.totalStakedValue,"1.2-4"),""),n.xp6(3),n.Q6J("ngClass",n.VKq(23,a,0==t)),n.xp6(2),n.Q6J("ngClass",n.VKq(25,a,0==t)),n.xp6(1),n.AsE(" Daily ",n.xi3(9,12,100*i.tradingFeeDailyApy,"1.2-4"),"% / Avg ",n.xi3(10,15,100*i.tradingFeeAvgApy,"1.2-4"),"% "),n.xp6(3),n.Q6J("ngClass",n.VKq(27,a,0==t)),n.xp6(2),n.Q6J("ngClass",n.VKq(29,a,0==t)),n.xp6(1),n.hij("",n.xi3(15,18,100*i.titiRewardAPY,"1.2-4"),"%")}}const F=function(o){return["/","lpminingPools","lpminingPool",o]};function J(o,e){if(1&o&&(n.TgZ(0,"div",10),n.TgZ(1,"div"),n.TgZ(2,"span",11),n._uU(3),n.qZA(),n.YNc(4,k,2,0,"ng-container",12),n.qZA(),n.TgZ(5,"span",11),n._uU(6),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.qZA(),n.YNc(9,b,16,31,"ng-container",13),n.ALo(10,"async"),n.qZA()),2&o){const i=e.$implicit,t=e.index;n.oxw();const s=n.MAs(25);n.Q6J("routerLink",n.VKq(12,F,i.contractAddress)),n.xp6(2),n.Q6J("ngClass",n.VKq(14,a,0==t)),n.xp6(1),n.Oqu(i.name),n.xp6(1),n.Q6J("ngIf",0==t),n.xp6(1),n.Q6J("ngClass",n.VKq(16,a,0==t)),n.xp6(1),n.Oqu(i.platform),n.xp6(1),n.Q6J("ngClass",n.VKq(18,a,0==t)),n.xp6(1),n.Oqu(i.type),n.xp6(1),n.Q6J("ngIf",n.lcZ(10,10,i.poolData$))("ngIfElse",s)}}function Q(o,e){1&o&&(n.TgZ(0,"mat-icon",15),n._uU(1," sync "),n.qZA(),n.TgZ(2,"mat-icon",15),n._uU(3," sync "),n.qZA())}function O(o,e){1&o&&(n.ynx(0),n._uU(1," \u{1f525}"),n.BQk())}function I(o,e){if(1&o&&(n.ynx(0),n.TgZ(1,"span",11),n._uU(2),n.ALo(3,"number"),n.qZA(),n.TgZ(4,"div",17),n.TgZ(5,"span",11),n._uU(6,"Total Reward Apy:"),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.ALo(9,"number"),n.ALo(10,"number"),n.qZA(),n.qZA(),n.BQk()),2&o){const i=e.ngIf,t=n.oxw().index;n.xp6(1),n.Q6J("ngClass",n.VKq(15,a,0==t)),n.xp6(1),n.hij("$ ",n.xi3(3,6,i.tvl,"1.2-4"),""),n.xp6(3),n.Q6J("ngClass",n.VKq(17,a,0==t)),n.xp6(2),n.Q6J("ngClass",n.VKq(19,a,0==t)),n.xp6(1),n.AsE("",n.xi3(9,9,i.apr[0],"1.2-4"),"% - ",n.xi3(10,12,i.apr[1],"1.2-4"),"%")}}function j(o,e){if(1&o){const i=n.EpF();n.TgZ(0,"div",16),n.NdJ("click",function(){const p=n.CHM(i).$implicit;return n.oxw().openUrl(p.url)}),n.TgZ(1,"div"),n.TgZ(2,"span",11),n._uU(3),n.qZA(),n.YNc(4,O,2,0,"ng-container",12),n.qZA(),n.TgZ(5,"span",11),n._uU(6),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.qZA(),n.YNc(9,I,11,21,"ng-container",13),n.ALo(10,"async"),n.qZA()}if(2&o){const i=e.$implicit,t=e.index;n.oxw();const s=n.MAs(25);n.xp6(2),n.Q6J("ngClass",n.VKq(11,a,0==t)),n.xp6(1),n.Oqu(i.name),n.xp6(1),n.Q6J("ngIf",0==t),n.xp6(1),n.Q6J("ngClass",n.VKq(13,a,0==t)),n.xp6(1),n.Oqu(i.platform),n.xp6(1),n.Q6J("ngClass",n.VKq(15,a,0==t)),n.xp6(1),n.Oqu(i.type),n.xp6(1),n.Q6J("ngIf",n.lcZ(10,9,i.externalLpminingPoolData$))("ngIfElse",s)}}const K=[{path:"",component:(()=>{class o{constructor(i,t,s){this.chainInfoService=i,this.web3Service=t,this.graphService=s,this.lpPoolMap=this.chainInfoService.getChainConfig().lpminingPools,this.lpPools=Object.keys(this.lpPoolMap).map(p=>Object.assign(Object.assign({},this.lpPoolMap[p]),{poolData$:(0,C.D)(this.fetchLPTokenData(this.lpPoolMap[p].contractAddress,this.lpPoolMap[p].pairAddress))})),this.externalLpminingPools=this.chainInfoService.getChainConfig().externalLpminingPools.map(p=>{const u=(0,C.D)(this.fetchExternalLpminingPoolData(p));return Object.assign(Object.assign({},p),{externalLpminingPoolData$:u})})}openUrl(i){window.open(i)}ngOnInit(){}fetchExternalLpminingPoolData(i){return fetch(i.api).then(t=>t.json()).then(t=>t.data.data.find(s=>s.pool_address.toLowerCase()==i.address.toLowerCase()))}fetchTiTiPrice(){return Promise.all([this.web3Service.invokeContract("UniswapV2Pair","getReserves",[]),this.graphService.fetchTodayMMFRewardData(this.chainInfoService.getChainConfig().contractAddressMap.MAMMSwapPair)]).then(i=>i[0][1]/i[0][0]*(i[1].data.pair.fund1*10**12/i[1].data.pair.fund0))}fetchLPTokenData(i,t){return Promise.all([this.web3Service.invokeContract("MAMMSwapPair","getDepth",[]),this.web3Service.invokeContract("UniswapV2Pair","totalSupply",[],t),this.web3Service.invokeContract("LPStakingPool","totalSupply",[],i),this.web3Service.invokeContract("UniswapV2Pair","getReserves",[],t),this.web3Service.invokeContract("UniswapV2Pair","token0",[],t),this.web3Service.invokeContract("LPStakingPool","rewardRate",[],i),this.web3Service.invokeContract("LPStakingPool","startTime",[],i),this.web3Service.invokeContract("LPStakingPool","periodFinish",[],i),this.fetchTiTiPrice(),this.graphService.fetchTradingFee(t)]).then(([s,p,u,c,$,E,N,z,H,{data:X}])=>{const g=s[1]/10**6/(s[0]/10**18),T=p[0],d=u[0],m=this.chainInfoService.getChainConfig().contractAddressMap.TiUSD.toLowerCase()==$[0].toLowerCase(),w=m?c[0]:c[1],f=T>0?2*w*g/T:0,v=d/10**18*f,L=(new Date).getTime()/1e3,nn=v>0?(L>z[0]||L<N[0]?0:E[0]/10**18)*H*86400*365/v:0,_=m?g:c[1]/10**18*g/(c[0]/10**this.lpPoolMap[i].anotherTokenDecimals),q=m?c[0]/10**this.lpPoolMap[i].anotherTokenDecimals*g/(c[1]/10**18):g,{dailyTradeVolume:P,totalTradeVolume:Z}=X,{feeVolume0:on,feeVolume1:tn}=null!=P?P:{feeVolume0:"0",feeVolume1:"0"},{totalFeeVolume0:en,totalFeeVolume1:an}=null!=Z?Z:{totalFeeVolume0:"0",totalFeeVolume1:"0"},U=m?18:this.lpPoolMap[i].anotherTokenDecimals,y=m?this.lpPoolMap[i].anotherTokenDecimals:18;return{liquidity:T,totalStakedLPToken:d,pairTiUSDFund:w,lpTokenPrice:f,totalStakedValue:v,titiRewardAPY:nn,tradingFeeDailyApy:365*(on/10**U*_+tn/10**y*q)/(d/10**18*f),tradingFeeAvgApy:365*(en/10**U*_+an/10**y*q)*86400*1e3/(d/10**18*f*((new Date).getTime()-this.chainInfoService.getChainConfig().startTime))}})}}return o.\u0275fac=function(i){return new(i||o)(n.Y36(D.Z),n.Y36(M.Uc),n.Y36(S.h))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-lpmining-pools"]],decls:27,vars:2,consts:[[1,"lpmining-pools-wrapper"],[1,"page-title"],["href","https://docs.titi.finance/titi-mainnet/usdtiti-reward-distribution-rules","target","_blank"],[1,"lpmining-pools-card","mat-elevation-z4"],[1,"lpmining-pool-header"],["text","\u25cb Fluctuation: A trading pair consisting of TiUSD and volatile assets, with high price fluctuations, impermanent losses may occur.\n                    \u25cb Stable: A trading pair composed of TUSD and stable assets, with low price fluctuations and minimal impermanent losses."],[1,"divider",2,"margin","0.5rem 0"],["class","lpmining-pool-item",3,"routerLink",4,"ngFor","ngForOf"],["loadingTemplate",""],["class","lpmining-pool-item",3,"click",4,"ngFor","ngForOf"],[1,"lpmining-pool-item",3,"routerLink"],[3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[2,"display","grid","grid-template-columns","auto auto","column-gap","1vw","justify-items","start","align-items","center","row-gap","0.5rem"],["color","primary","matListIcon","",1,"fa-spin"],[1,"lpmining-pool-item",3,"click"],[2,"display","grid","grid-template-columns","auto auto","column-gap","1vw","justify-items","start","align-items","center"]],template:function(i,t){1&i&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"h1"),n._uU(3,"TiUSD - XToken LP Mining Pools"),n.qZA(),n.TgZ(4,"p"),n._uU(5,"LP mining rewards are $TiTi and Trading fee. Choose a trading pair on the mainstream DEX and Provide TiUSD/xToken Liquidity based on your experience. "),n.TgZ(6,"a",2),n._uU(7,"Click to Learn More"),n.qZA(),n._uU(8,"."),n.qZA(),n.qZA(),n.TgZ(9,"div",3),n.TgZ(10,"div",4),n.TgZ(11,"span"),n._uU(12,"Assets"),n.qZA(),n.TgZ(13,"span"),n._uU(14,"Platform"),n.qZA(),n.TgZ(15,"span"),n._uU(16,"Pair Type"),n._UZ(17,"titi-tooltip",5),n.qZA(),n.TgZ(18,"span"),n._uU(19,"Total Staked Value"),n.qZA(),n.TgZ(20,"span"),n._uU(21,"APY"),n.qZA(),n.qZA(),n._UZ(22,"div",6),n.YNc(23,J,11,20,"div",7),n.YNc(24,Q,4,0,"ng-template",null,8,n.W1O),n.YNc(26,j,11,17,"div",9),n.qZA(),n.qZA()),2&i&&(n.xp6(23),n.Q6J("ngForOf",t.lpPools),n.xp6(3),n.Q6J("ngForOf",t.externalLpminingPools))},directives:[V.Q,l.sg,h.rH,l.mk,l.O5,A.Hw],pipes:[l.Ov,l.JJ],styles:[".lpmining-pools-wrapper[_ngcontent-%COMP%]{padding:24px}.lpmining-pools-card[_ngcontent-%COMP%]{width:100%;margin-top:2vw}.lpmining-pool-header[_ngcontent-%COMP%]{width:100%;grid-column-start:span 5;display:grid;padding:.5rem 1rem;grid-template-columns:2fr 2fr 2fr 3fr 5fr;grid-column-gap:1rem;column-gap:1rem;grid-row-gap:1rem;row-gap:1rem;justify-items:start;align-items:center;font-size:1vw;font-weight:700}.lpmining-pool-item[_ngcontent-%COMP%]{width:100%;min-height:45px;grid-column-start:span 5;display:grid;padding:.5rem 1rem;grid-template-columns:2fr 2fr 2fr 3fr 5fr;grid-column-gap:1rem;column-gap:1rem;grid-row-gap:1rem;row-gap:1rem;justify-items:start;align-items:center;cursor:pointer;border-radius:1rem;box-shadow:0 0 2px 2px #b8fff900;margin-top:.5rem;font-size:.8vw}.lpmining-pool-item[_ngcontent-%COMP%]:hover{background:rgba(184,255,249,.2);box-shadow:0 0 2px 2px #b8fff980}"]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[h.Bz.forChild(K)],h.Bz]}),o})();var R=r(87841);let B=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[l.ez,Y,A.Ps,R.m]]}),o})()}}]);